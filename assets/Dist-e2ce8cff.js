import{_ as oe,g as v,r as N,a as j,h as se,b as u,j as ne,o as U,c as B,e as n,d as e,w as s,f as x,t as d,u as o,k as ie,l as R,m as G,F as pe,C as re,p as J,q as K,s as de,v as ue}from"./index-823c221e.js";const C=M=>(de("data-v-d143c1e0"),M=M(),ue(),M),_e={class:"boxs"},ce={class:"box"},me=C(()=>n("span",{style:{color:"#999","font-size":"14px"}},"订单",-1)),ge=C(()=>n("span",{style:{margin:"0 10px",color:"#999"}},"/",-1)),fe=C(()=>n("span",{style:{"font-weight":"600"}}," 订单列表",-1)),ve={style:{display:"flex","align-items":"center","font-weight":"600","margin-bottom":"20px"}},xe={style:{"padding-top":"16px","border-top":"1px solid rgb(230, 237, 239)"}},he={class:"demo-input-size"},ye={class:"demo-input-size ipo"},be=C(()=>n("div",{class:"klj"},null,-1)),we=C(()=>n("div",{class:"klj"},null,-1)),Ve={style:{display:"flex","align-items":"center","justify-content":"space-between","font-weight":"600",width:"100%"}},ze={style:{"font-weight":"300",color:"#999","margin-right":"5px"}},ke={class:"s1"},De={style:{"font-size":"12px"}},Ue={style:{"font-size":"12px",color:"#2d8cf0"}},Ce={style:{"font-size":"12px"}},Me={style:{display:"block",width:"180px","font-size":"12px"}},je={style:{"font-size":"12px"}},Se={style:{"font-size":"12px"}},Ye={style:{"font-size":"12px"}},Ie={style:{"font-size":"12px"}},Ne={style:{"font-size":"12px",display:"block",width:"100%"},class:"sp1"},Be={style:{display:"flex","align-items":"center","margin-top":"30px","font-size":"12px"}},Ee={key:0,class:"back"},Fe={__name:"Dist",setup(M){const S=v(!1),P=v(!0);let E=v([]),Q=a=>{j.post("/order/orderfanyong",{orderid:a.orderid}).then(l=>{console.log(l),E.value=l.data.r}),S.value=!0},y=v(1),i=N({last_page:"",per_page:"",price_fan:"",price_pay:"",price_settle:"",total:"",user_count:""}),b=v(""),w=v(""),F=N({time1:"",time2:""}),p=N({v1:"",v2:"",v3:"",v4:"",v5:"",v6:"",v7:"",v8:"",v9:""}),H=()=>{p={v1:"",v2:"",v3:"",v4:"",v5:"",v6:"",v7:"",v8:"",v9:""},w.value="",b.value="",A(0)},Y=v([]);j.post("/line/getuser").then(a=>{Y.value=a.data.r,console.log(a.data.r)});let q=a=>{console.log(a),y.value=a,A(1)},V=v(!1),z=v([]),A=a=>{V.value=!0,a||(y.value=1,console.log("111111111111111111")),j.post("/order/Orderlist",{date:["",""],enddate:F.time2,name:p.v3,opendate:"",opentime:b.value,orderid:p.v2,page:y.value,pay_status:i.v7,shareid:p.v5,sharepid:p.v6,startdate:F.time1,status:i.v8,tel:p.v4,title:p.v1,u_id:p.v9}).then(l=>{console.log(y.value),V.value=!1;let{last_page:g,per_page:f,price_fan:h,price_pay:m,price_settle:c,total:_,user_count:k}=l.data.m;i.last_page=g,i.per_page=f,i.price_fan=h,i.price_pay=m,i.price_settle=c,i.total=_,i.user_count=k,z.value=l.data.m.data,z.value=l.data.m.data,O(),console.log(l)})};se(()=>{W()});function W(){y.value=1,V.value=!0,j.post("/order/Orderlist").then(a=>{V.value=!1;let{last_page:l,per_page:g,price_fan:f,price_pay:h,price_settle:m,total:c,user_count:_}=a.data.m;i.last_page=l,i.per_page=g,i.price_fan=f,i.price_pay=h,i.price_settle=m,i.total=c,i.user_count=_,z.value=a.data.m.data,O()})}function X(a){let l=new Date(+a),g=l.getFullYear()+"-",f=(l.getMonth()+1<10?"0"+(l.getMonth()+1):l.getMonth()+1)+"-",h=(l.getDate()<10?"0"+l.getDate():l.getDate())+" ",m=(l.getHours()<10?"0"+l.getHours():l.getHours())+":",c=l.getMinutes()<10?"0"+l.getMinutes():l.getMinutes();return g+f+h+m+c}function O(){z.value.forEach((a,l)=>{a.createtime=X(a.createtime*1e3),a.idss=l+1,a.pay_status==1?(a.pay_status="未支付",a.colors="rgb(255,153,0)"):a.pay_status==2?(a.pay_status="已支付",a.colors="rgb(25,190,107)"):a.pay_status==3?(a.pay_status="退款中",a.colors="rgb(64,172,204)"):(a.pay_status="已退款",a.colors="rgb(25,190,107)"),a.status==1?(a.status="未确认",a.color="rgb(255,153,0)"):a.status==2?(a.status="已确认",a.color="rgb(25,190,107)"):a.status==3?(a.status="已关闭",a.color="#999"):(a.status="已完成",a.color="rgb(75,157,242)")})}return(a,l)=>{const g=u("el-card"),f=u("el-col"),h=u("Expand"),m=u("el-icon"),c=u("el-input"),_=u("el-option"),k=u("el-select"),T=u("el-date-picker"),D=u("el-button"),Z=u("MagicStick"),L=u("Umbrella"),r=u("el-table-column"),$=u("el-tooltip"),I=u("el-table"),ee=u("el-pagination"),te=u("el-dialog"),le=ne("loading");return U(),B("div",_e,[n("div",ce,[e(f,null,{default:s(()=>[e(g,{shadow:"never",style:{border:"none",position:"relative"}},{default:s(()=>[me,ge,fe]),_:1})]),_:1}),e(f,{style:{"margin-top":"20px"}},{default:s(()=>[e(g,{shadow:"hover"},{default:s(()=>[n("div",ve,[e(m,{style:{"margin-right":"5px"}},{default:s(()=>[e(h)]),_:1}),x(" 订单查询 ")]),n("div",xe,[n("div",he,[e(c,{style:{"font-size":"12px","margin-bottom":"30px"},modelValue:o(p).v1,"onUpdate:modelValue":l[0]||(l[0]=t=>o(p).v1=t),class:"w-50 m-2",placeholder:"商品名称："},null,8,["modelValue"]),e(c,{style:{"font-size":"12px","margin-bottom":"30px"},modelValue:o(p).v2,"onUpdate:modelValue":l[1]||(l[1]=t=>o(p).v2=t),class:"w-50 m-2",placeholder:"订单编号："},null,8,["modelValue"]),e(c,{style:{"font-size":"12px","margin-bottom":"30px"},modelValue:o(p).v3,"onUpdate:modelValue":l[2]||(l[2]=t=>o(p).v3=t),class:"w-50 m-2",placeholder:"预定姓名："},null,8,["modelValue"]),e(c,{style:{"font-size":"12px","margin-bottom":"30px"},modelValue:o(p).v4,"onUpdate:modelValue":l[3]||(l[3]=t=>o(p).v4=t),class:"w-50 m-2",placeholder:"预定电话："},null,8,["modelValue"]),e(k,{modelValue:o(p).v9,"onUpdate:modelValue":l[4]||(l[4]=t=>o(p).v9=t),placeholder:"选择商家",style:{"font-size":"12px",width:"100%"}},{default:s(()=>[o(Y).length?(U(!0),B(pe,{key:0},re(o(Y),(t,ae)=>(U(),R(_,{key:t.u_id,label:t.shop,value:t.u_id},null,8,["label","value"]))),128)):G("",!0)]),_:1},8,["modelValue"]),e(T,{modelValue:o(w),"onUpdate:modelValue":l[5]||(l[5]=t=>J(w)?w.value=t:w=t),type:"daterange","start-placeholder":"起止时间","default-value":[new Date,new Date],class:"inp",style:{"margin-right":"30px","max-width":"220px"}},null,8,["modelValue","default-value"]),e(T,{modelValue:o(b),"onUpdate:modelValue":l[6]||(l[6]=t=>J(b)?b.value=t:b=t),type:"date",placeholder:"预约时间",format:"YYYY/MM/DD","value-format":"x",style:{"margin-right":"30px","max-width":"250px"}},null,8,["modelValue"])]),n("div",ye,[e(c,{style:{"font-size":"12px","margin-bottom":"30px","margin-right":"30px","max-width":"194.4px"},modelValue:o(p).v5,"onUpdate:modelValue":l[7]||(l[7]=t=>o(p).v5=t),class:"w-50 m-2",placeholder:"直推id"},null,8,["modelValue"]),e(c,{style:{"font-size":"12px","margin-bottom":"30px","max-width":"194.4px","margin-right":"30px"},modelValue:o(p).v6,"onUpdate:modelValue":l[8]||(l[8]=t=>o(p).v6=t),class:"w-50 m-2",placeholder:"间推id"},null,8,["modelValue"]),e(k,{modelValue:o(i).v7,"onUpdate:modelValue":l[9]||(l[9]=t=>o(i).v7=t),placeholder:"支付状态",style:{"font-size":"12px",width:"100%","max-width":"194.4px","margin-right":"30px"}},{default:s(()=>[e(_,{label:"已支付",value:"2"}),e(_,{label:"未支付",value:"1"}),e(_,{label:"退款中",value:"3"}),e(_,{label:"退款已完成",value:"4"})]),_:1},8,["modelValue"]),e(k,{modelValue:o(i).v8,"onUpdate:modelValue":l[10]||(l[10]=t=>o(i).v8=t),placeholder:"订单状态",style:{"font-size":"12px",width:"100%","max-width":"194.4px","margin-right":"30px"}},{default:s(()=>[e(_,{label:"待确认",value:"1"}),e(_,{label:"已确认",value:"2"}),e(_,{label:"已取消",value:"3"}),e(_,{label:"已完成",value:"6"})]),_:1},8,["modelValue"]),e(D,{type:"primary",style:{"margin-bottom":"29px"},onClick:l[11]||(l[11]=t=>o(q)(1))},{default:s(()=>[x("查询")]),_:1}),n("span",{onClick:l[12]||(l[12]=(...t)=>o(H)&&o(H)(...t)),style:{"font-size":"12px",position:"relative",top:"-13px",left:"30px",cursor:"pointer"},class:"sp1"}," 清空搜索条件 "),be,we])])]),_:1})]),_:1}),e(f,{style:{"margin-top":"30px"}},{default:s(()=>[e(g,{shadow:"hover"},{default:s(()=>[n("div",Ve,[n("div",null,[e(m,{style:{"margin-right":"5px"}},{default:s(()=>[e(Z)]),_:1}),x(" 商品列表 ")]),n("div",null,[n("span",ze," 订单总金额："+d(o(i).price_pay)+" 预定总数量："+d(o(i).user_count)+" 总返利："+d(o(i).price_fan)+" 总结算： "+d(o(i).price_settle),1),e(D,{type:"primary",size:"small"},{default:s(()=>[e(m,null,{default:s(()=>[e(L)]),_:1}),x("导出名单")]),_:1}),e(D,{type:"primary",size:"small"},{default:s(()=>[e(m,null,{default:s(()=>[e(L)]),_:1}),x("导出订单")]),_:1})])]),e(I,{data:o(z),border:"",style:{width:"100%","margin-top":"20px"}},{default:s(()=>[e(r,{prop:"idss",label:"#",align:"center"}),e(r,{prop:"",label:"订单编号",width:"150"},{default:s(t=>[n("div",ke,[n("span",De,d(t.row.orderid),1),n("div",Ue,d(t.row.createtime),1)])]),_:1}),e(r,{prop:"shop",label:"商品名称",width:"238"},{default:s(t=>[n("p",Ce,"商品ID:"+d(t.row.t_id),1),n("b",Me,d(t.row.title),1)]),_:1}),e(r,{prop:"chcount",label:"数量",align:"center"}),e(r,{prop:"opentime",label:"预约时间",align:"center"}),e(r,{prop:"name",label:"预约姓名",align:"center"}),e(r,{prop:"tel",label:"预约电话",align:"center"},{default:s(t=>[n("span",je,d(t.row.tel),1)]),_:1}),e(r,{fixed:"right",prop:"",label:"交易统计",width:"150"},{default:s(t=>[n("div",Se,[n("div",null,"支付金额："+d(t.row.real_price),1),n("div",null,"成本结算:"+d(t.row.settle_price),1),n("div",null,"对外返利:"+d(t.row.fan_price),1)])]),_:1}),e(r,{fixed:"right",prop:"",label:"支付状态",align:"center"},{default:s(t=>[n("div",{style:K(["background-color: "+t.row.colors,{color:"#fff",width:"52px",padding:"0 8px","font-size":"12px","border-radius":"4px",cursor:"pointer","margin-left":"12px"}])},d(t.row.pay_status),5)]),_:1}),e(r,{fixed:"right",prop:"",label:"订单状态",align:"center"},{default:s(t=>[n("div",{style:K(["background-color: "+t.row.color,{color:"#fff",width:"52px",padding:"0 8px","font-size":"12px","border-radius":"4px",cursor:"pointer","margin-left":"12px"}])},d(t.row.status),5)]),_:1}),e(r,{fixed:"right",prop:"p_name",label:"直推人",align:"center"},{default:s(t=>[n("span",Ye,d(t.row.p_name),1)]),_:1}),e(r,{fixed:"right",prop:"pp_name",label:"间推人",align:"center"},{default:s(t=>[n("span",Ie,d(t.row.pp_name),1)]),_:1}),e(r,{fixed:"right",prop:"'查看'",label:"佣金分配",align:"center"},{default:s(t=>[n("span",Ne,[e(D,{class:"sp1",style:{"font-size":"12px"},text:"",onClick:ae=>o(Q)(t.row)},{default:s(()=>[x(" 查看 ")]),_:2},1032,["onClick"])])]),_:1}),e(r,{fixed:"right",prop:"",label:"操作",align:"center"},{default:s(t=>[e($,{class:"box-item",effect:"dark",content:"查看详情",placement:"bottom","show-after":"1",size:"small"},{default:s(()=>[e(D,{type:"primary",size:"small",style:{"font-size":"12px",color:"white",margin:"5px",width:"46px",height:"19px","background-color":"#2d8cf0 !important"}},{default:s(()=>[x("🔍")]),_:1})]),_:1})]),_:1})]),_:1},8,["data"])]),_:1})]),_:1}),n("div",Be,[x(" 共"+d(o(i).total)+"条",1),e(ee,{layout:"prev, pager, next",total:o(i).total,"page-size":o(i).per_page,class:"mt-4",onCurrentChange:o(q),"current-page":o(y)},null,8,["total","page-size","onCurrentChange","current-page"])])]),o(V)?(U(),B("div",Ee,[ie((U(),R(I,{style:{width:"100%","margin-bottom":"200px"}},{default:s(()=>[e(r,{prop:"date",label:"Date",width:"180"}),e(r,{prop:"name",label:"Name",width:"180"}),e(r,{prop:"address",label:"Address"})]),_:1})),[[le,P.value]])])):G("",!0),e(te,{modelValue:S.value,"onUpdate:modelValue":l[13]||(l[13]=t=>S.value=t),title:"佣金分配详情"},{default:s(()=>[e(I,{data:o(E)},{default:s(()=>[e(r,{property:"u_name",label:"姓名",width:"150"}),e(r,{property:"u_phone",label:"手机",width:"200"}),e(r,{property:"totle_fan",label:"返佣金额"})]),_:1},8,["data"])]),_:1},8,["modelValue"])])}}},qe=oe(Fe,[["__scopeId","data-v-d143c1e0"]]);export{qe as default};
